# é‡‘èé‡åŒ–å·¥å…·æ¶æ„è®¾è®¡æ–‡æ¡£

## ğŸ¯ é¡¹ç›®æ¦‚è¿°

åŸºäº ASCEND æ¡†æ¶æ„å»ºçš„é‡‘èé‡åŒ–å·¥å…·ï¼Œä¸“æ³¨äºæ—¥Kçº¿ç­–ç•¥ï¼Œé€šè¿‡å¤šå› å­è¯„åˆ†æ¨¡å‹å¯¹æ²ªæ·±åˆ›ä¸šæ¿è‚¡ç¥¨è¿›è¡Œæ‰“åˆ†ã€å›æµ‹å’Œäº¤æ˜“å†³ç­–ã€‚

## ğŸ—ï¸ æ•´ä½“æ¶æ„è®¾è®¡

### æ’ä»¶åŒ–æ¶æ„ç†å¿µ

```mermaid
graph TB
    subgraph "ASCEND Core Framework"
        CORE[æ ¸å¿ƒæ¡†æ¶]
        PROTOCOL[åè®®æ¥å£]
        PLUGIN_MGR[æ’ä»¶ç®¡ç†å™¨]
    end
    
    subgraph "Quant Plugins Package (ç‹¬ç«‹åŒ…)"
        subgraph "æ•°æ®æ’ä»¶"
            DATA_SOURCE[æ•°æ®æºæ’ä»¶]
            DATA_PROCESS[æ•°æ®é¢„å¤„ç†]
            FEATURE_ENG[ç‰¹å¾å·¥ç¨‹]
        end
        
        subgraph "ç­–ç•¥æ’ä»¶"
            SCORING[è¯„åˆ†ç­–ç•¥]
            FACTOR[å¤šå› å­æ¨¡å‹]
            SIGNAL[ä¿¡å·ç”Ÿæˆ]
        end
        
        subgraph "å›æµ‹æ’ä»¶"
            BACKTEST[å›æµ‹å¼•æ“]
            PERFORMANCE[æ€§èƒ½è¯„ä¼°]
            RISK[é£é™©æ§åˆ¶]
        end
        
        subgraph "æ‰§è¡Œæ’ä»¶"
            TRADING[äº¤æ˜“æ‰§è¡Œ]
            POSITION[ä»“ä½ç®¡ç†]
            MONITOR[å®æ—¶ç›‘æ§]
        end
    end
    
    CORE --> PLUGIN_MGR
    PLUGIN_MGR --> DATA_SOURCE
    PLUGIN_MGR --> SCORING
    PLUGIN_MGR --> BACKTEST
    PLUGIN_MGR --> TRADING
    
    DATA_SOURCE --> SCORING
    SCORING --> BACKTEST
    BACKTEST --> TRADING
```

### æ¨¡å—åˆ’åˆ†

1. **æ•°æ®å±‚ (Data Layer)**
   - æ•°æ®æºæ’ä»¶ (Tushare/èšå®½/Wind)
   - æ•°æ®é¢„å¤„ç†æ’ä»¶
   - æ•°æ®å­˜å‚¨æ’ä»¶ (MySQL/MongoDB)

2. **ç­–ç•¥å±‚ (Strategy Layer)**
   - æ—¥Kçº¿è¯„åˆ†ç­–ç•¥æ’ä»¶
   - å¤šå› å­æ¨¡å‹æ’ä»¶
   - ä¿¡å·ç”Ÿæˆæ’ä»¶

3. **å›æµ‹å±‚ (Backtest Layer)**
   - å›æµ‹å¼•æ“æ’ä»¶
   - æ€§èƒ½è¯„ä¼°æ’ä»¶
   - é£é™©æ§åˆ¶æ’ä»¶

4. **æ‰§è¡Œå±‚ (Execution Layer)**
   - æ¨¡æ‹Ÿäº¤æ˜“å™¨æ’ä»¶
   - å®æ—¶ç›‘æ§æ’ä»¶
   - é£é™©æ§åˆ¶æ’ä»¶

## ğŸ”Œ æ ¸å¿ƒæ’ä»¶è®¾è®¡

### 1. æ•°æ®æ’ä»¶æ¶æ„ (`IFeatureExtractor` åè®®)

```mermaid
graph TB
    subgraph "æ•°æ®æ’ä»¶å±‚"
        DS1[Tushareæ•°æ®æº]
        DS2[èšå®½æ•°æ®æº]
        DS3[Windæ•°æ®æº]
        DS4[CSVæ–‡ä»¶æ•°æ®æº]
        DS5[æ•°æ®åº“æ•°æ®æº]
    end
    
    subgraph "æ•°æ®å¤„ç†å±‚"
        DP1[æ•°æ®æ¸…æ´—]
        DP2[ç¼ºå¤±å€¼å¤„ç†]
        DP3[æ•°æ®æ ‡å‡†åŒ–]
        DP4[ç‰¹å¾å·¥ç¨‹]
    end
    
    subgraph "æ•°æ®å­˜å‚¨å±‚"
        ST1[MySQLå­˜å‚¨]
        ST2[MongoDBå­˜å‚¨]
        ST3[Parquetæ–‡ä»¶å­˜å‚¨]
        ST4[Redisç¼“å­˜]
    end
    
    DS1 --> DP1
    DS2 --> DP1
    DS3 --> DP1
    DS4 --> DP1
    DS5 --> DP1
    
    DP1 --> DP2
    DP2 --> DP3
    DP3 --> DP4
    
    DP4 --> ST1
    DP4 --> ST2
    DP4 --> ST3
    DP4 --> ST4
```

**TushareDataPlugin**:
- æ”¯æŒæ²ªæ·±åˆ›ä¸šæ¿è‚¡ç¥¨æ•°æ®è·å–
- æ—¥Kçº¿æ•°æ®ç‰¹å¾æå–
- è‡ªåŠ¨æ•°æ®æ›´æ–°å’Œç»´æŠ¤

**MySQLStoragePlugin**:
- æ•°æ®æŒä¹…åŒ–å­˜å‚¨
- å†å²æ•°æ®ç®¡ç†
- å¿«é€Ÿæ•°æ®æŸ¥è¯¢

### 2. æ—¥Kçº¿ç­–ç•¥æ’ä»¶æ¶æ„ (`IPolicy` åè®®)

```mermaid
graph TB
    subgraph "æ—¥Kçº¿æ•°æ®è¾“å…¥"
        DK1[å¼€ç›˜ä»·]
        DK2[æœ€é«˜ä»·]
        DK3[æœ€ä½ä»·]
        DK4[æ”¶ç›˜ä»·]
        DK5[æˆäº¤é‡]
        DK6[æˆäº¤é¢]
    end
    
    subgraph "æŠ€æœ¯å› å­è®¡ç®—"
        TF1[ä»·æ ¼åŠ¨é‡å› å­]
        TF2[æˆäº¤é‡å› å­]
        TF3[æ³¢åŠ¨ç‡å› å­]
        TF4[è¶‹åŠ¿å› å­]
        TF5[ç›¸å¯¹å¼ºå¼±å› å­]
    end
    
    subgraph "è¯„åˆ†å¼•æ“"
        SE1[å› å­æƒé‡é…ç½®]
        SE2[ç»¼åˆè¯„åˆ†è®¡ç®—]
        SE3[æ’åå’Œç­›é€‰]
        SE4[ä¿¡å·ç”Ÿæˆ]
    end
    
    subgraph "è¾“å‡ºç»“æœ"
        OUT1[è‚¡ç¥¨è¯„åˆ†]
        OUT2[ä¹°å…¥ä¿¡å·]
        OUT3[å–å‡ºä¿¡å·]
        OUT4[æŒä»“å»ºè®®]
    end
    
    DK1 --> TF1
    DK2 --> TF1
    DK3 --> TF1
    DK4 --> TF1
    DK5 --> TF2
    DK6 --> TF2
    
    TF1 --> SE2
    TF2 --> SE2
    TF3 --> SE2
    TF4 --> SE2
    TF5 --> SE2
    
    SE1 --> SE2
    SE2 --> SE3
    SE3 --> SE4
    SE4 --> OUT1
    SE4 --> OUT2
    SE4 --> OUT3
    SE4 --> OUT4
```

**DailyKlineScoringPlugin**:
- å¤šå› å­è¯„åˆ†æ¨¡å‹
- æ—¥Kçº¿æŠ€æœ¯æŒ‡æ ‡è®¡ç®—
- åŠ¨æ€æƒé‡é…ç½®

**è¯„åˆ†å› å­**:
- åŠ¨é‡å› å­ (30%)
- æˆäº¤é‡å› å­ (20%)
- æ³¢åŠ¨ç‡å› å­ (15%)
- è¶‹åŠ¿å› å­ (20%)
- RSIç›¸å¯¹å¼ºå¼± (15%)

### 3. å›æµ‹å¼•æ“æ’ä»¶æ¶æ„ (`IEnvironment` åè®®)

```mermaid
graph TB
    subgraph "å›æµ‹è¾“å…¥"
        IN1[æ—¥Kçº¿æ•°æ®]
        IN2[ç­–ç•¥é…ç½®]
        IN3[åˆå§‹èµ„é‡‘]
        IN4[äº¤æ˜“è§„åˆ™]
    end
    
    subgraph "å›æµ‹æ ¸å¿ƒå¼•æ“"
        CORE1[æ•°æ®åŠ è½½å™¨]
        CORE2[äº‹ä»¶å¾ªç¯]
        CORE3[ç­–ç•¥æ‰§è¡Œå™¨]
        CORE4[äº¤æ˜“æ¨¡æ‹Ÿå™¨]
        CORE5[ä»“ä½ç®¡ç†å™¨]
    end
    
    subgraph "é£é™©ç®¡ç†"
        RISK1[æ­¢æŸæ§åˆ¶]
        RISK2[æ­¢ç›ˆæ§åˆ¶]
        RISK3[ä»“ä½æ§åˆ¶]
        RISK4[æœ€å¤§å›æ’¤æ§åˆ¶]
    end
    
    subgraph "æ€§èƒ½è¯„ä¼°"
        PERF1[æ”¶ç›Šç‡è®¡ç®—]
        PERF2[é£é™©æŒ‡æ ‡]
        PERF3[åŸºå‡†å¯¹æ¯”]
        PERF4[äº¤æ˜“ç»Ÿè®¡]
    end
    
    subgraph "è¾“å‡ºç»“æœ"
        OUT1[å›æµ‹æŠ¥å‘Š]
        OUT2[å‡€å€¼æ›²çº¿]
        OUT3[æŒä»“è®°å½•]
        OUT4[äº¤æ˜“æ˜ç»†]
    end
    
    IN1 --> CORE1
    IN2 --> CORE3
    IN3 --> CORE4
    IN4 --> RISK1
    
    CORE1 --> CORE2
    CORE2 --> CORE3
    CORE3 --> CORE4
    CORE4 --> CORE5
    
    CORE5 --> RISK1
    RISK1 --> RISK2
    RISK2 --> RISK3
    RISK3 --> RISK4
    
    CORE2 --> PERF1
    CORE4 --> PERF1
    PERF1 --> PERF2
    PERF2 --> PERF3
    PERF3 --> PERF4
    
    PERF1 --> OUT1
    PERF2 --> OUT1
    PERF3 --> OUT1
    PERF4 --> OUT1
    
    CORE4 --> OUT4
    CORE5 --> OUT3
    PERF1 --> OUT2
```

**DailyBacktestEnginePlugin**:
- åŸºäºäº‹ä»¶é©±åŠ¨çš„å›æµ‹æ¡†æ¶
- å®Œæ•´çš„äº¤æ˜“æ¨¡æ‹Ÿ
- è¯¦ç»†çš„æ€§èƒ½è¯„ä¼°

**æ ¸å¿ƒåŠŸèƒ½**:
- åˆå§‹èµ„é‡‘é…ç½®
- äº¤æ˜“æˆæœ¬æ¨¡æ‹Ÿ
- é£é™©æ§åˆ¶è§„åˆ™
- æ€§èƒ½æŒ‡æ ‡è®¡ç®—

### 4. äº¤æ˜“æ‰§è¡Œå’Œç›‘æ§æ’ä»¶æ¶æ„

```mermaid
graph TB
    subgraph "äº¤æ˜“æ‰§è¡Œå±‚"
        EX1[æ¨¡æ‹Ÿäº¤æ˜“å™¨]
        EX2[å®ç›˜äº¤æ˜“æ¥å£]
        EX3[è®¢å•ç®¡ç†å™¨]
        EX4[ä»“ä½æ§åˆ¶å™¨]
    end
    
    subgraph "é£é™©æ§åˆ¶"
        RC1[å®æ—¶é£æ§]
        RC2[æ­¢æŸæ­¢ç›ˆ]
        RC3[ä»“ä½é™åˆ¶]
        RC4[äº¤æ˜“é¢‘ç‡æ§åˆ¶]
    end
    
    subgraph "ç›‘æ§ç³»ç»Ÿ"
        MON1[æ€§èƒ½ç›‘æ§]
        MON2[å¼‚å¸¸æ£€æµ‹]
        MON3[æ—¥å¿—è®°å½•]
        MON4[æŠ¥è­¦é€šçŸ¥]
    end
    
    subgraph "æ•°æ®æµ"
        DF1[ç­–ç•¥ä¿¡å·]
        DF2[å¸‚åœºæ•°æ®]
        DF3[è´¦æˆ·çŠ¶æ€]
        DF4[äº¤æ˜“ç»“æœ]
    end
    
    DF1 --> EX1
    DF1 --> EX2
    DF2 --> EX1
    DF2 --> EX2
    
    EX1 --> EX3
    EX2 --> EX3
    EX3 --> EX4
    
    EX4 --> RC1
    RC1 --> RC2
    RC2 --> RC3
    RC3 --> RC4
    
    EX1 --> MON1
    EX2 --> MON1
    EX3 --> MON2
    EX4 --> MON3
    
    MON1 --> DF4
    MON2 --> DF4
    MON3 --> DF4
    
    RC4 --> MON4
```

**SimTraderPlugin**:
- æ¨¡æ‹Ÿäº¤æ˜“æ‰§è¡Œ
- ä»“ä½ç®¡ç†
- è®¢å•å¤„ç†

**RealtimeMonitorPlugin** (`IMonitor` åè®®):
- å®æ—¶æ€§èƒ½ç›‘æ§
- é£é™©é¢„è­¦
- ç³»ç»ŸçŠ¶æ€æ£€æŸ¥

## ğŸ“Š æ•°æ®æµè®¾è®¡

```mermaid
graph LR
    DATA[æ•°æ®è·å–] --> PRE[æ•°æ®é¢„å¤„ç†]
    PRE --> FEAT[ç‰¹å¾å·¥ç¨‹]
    FEAT --> STRAT[ç­–ç•¥è¯„åˆ†]
    STRAT --> BACK[å›æµ‹éªŒè¯]
    BACK --> EXEC[äº¤æ˜“æ‰§è¡Œ]
    EXEC --> MON[å®æ—¶ç›‘æ§]
    MON --> DATA
```

## âš™ï¸ é…ç½®æ–‡ä»¶è®¾è®¡

### ä¸»é…ç½®æ–‡ä»¶ç»“æ„

```yaml
version: "1.0.0"
framework: "ascend"

plugins:
  - "tushare_data"
  - "mysql_storage"
  - "daily_kline_scoring"
  - "daily_backtest_engine"
  - "sim_trader"
  - "realtime_monitor"

data:
  source: "tushare"
  start_date: "2023-01-01"
  end_date: "2023-12-31"
  symbols_file: "./config/symbols.txt"

strategy:
  type: "daily_kline_scoring"
  factor_weights:
    momentum: 0.35
    volume: 0.15
    volatility: 0.15
    trend: 0.25
    rsi_strength: 0.10
  scoring_threshold: 0.65

backtest:
  initial_capital: 1000000
  commission: 0.0003
  slippage: 0.0001
  max_position_per_stock: 0.2

execution:
  type: "simulation"
  trade_time: "14:55:00"
```

### è‚¡ç¥¨åˆ—è¡¨æ–‡ä»¶æ ¼å¼

```
# config/symbols.txt
000001.SZ  # å¹³å®‰é“¶è¡Œ
000002.SZ  # ä¸‡ç§‘A
000063.SZ  # ä¸­å…´é€šè®¯
300001.SZ  # ç‰¹é”å¾·
300002.SZ  # ç¥å·æ³°å²³
600000.SH  # æµ¦å‘é“¶è¡Œ
```

## ğŸš€ å®æ–½è·¯çº¿å›¾

### Phase 1: åŸºç¡€æ¶æ„æ­å»º
- [ ] åˆ›å»ºæ’ä»¶é¡¹ç›®ç»“æ„
- [ ] å®ç°æ•°æ®æ’ä»¶
- [ ] å®ç°ç­–ç•¥æ’ä»¶æ¡†æ¶

### Phase 2: æ ¸å¿ƒåŠŸèƒ½å¼€å‘
- [ ] å®Œæˆæ—¥Kçº¿è¯„åˆ†ç­–ç•¥
- [ ] å®ç°å›æµ‹å¼•æ“
- [ ] å¼€å‘æ¨¡æ‹Ÿäº¤æ˜“å™¨

### Phase 3: ç³»ç»Ÿé›†æˆ
- [ ] æ’ä»¶é…ç½®ç®¡ç†
- [ ] æ•°æ®æµæ°´çº¿æ•´åˆ
- [ ] æ€§èƒ½ç›‘æ§ç³»ç»Ÿ

### Phase 4: ä¼˜åŒ–æ‰©å±•
- [ ] å¤šç­–ç•¥æ”¯æŒ
- [ ] å®æ—¶æ•°æ®æ¥å…¥
- [ ] é«˜çº§é£æ§åŠŸèƒ½

## ğŸ“ˆ æ€§èƒ½æŒ‡æ ‡

### å›æµ‹è¯„ä¼°æŒ‡æ ‡
- æ€»æ”¶ç›Šç‡
- å¹´åŒ–æ”¶ç›Šç‡
- å¤æ™®æ¯”ç‡
- æœ€å¤§å›æ’¤
- èƒœç‡
- ç›ˆäºæ¯”

### ç›‘æ§æŒ‡æ ‡
- ç³»ç»Ÿè¿è¡ŒçŠ¶æ€
- æ•°æ®æ›´æ–°é¢‘ç‡
- ç­–ç•¥æ‰§è¡Œæ€§èƒ½
- é£é™©æŒ‡æ ‡ç›‘æ§

## ğŸ”§ æŠ€æœ¯æ ˆ

- **æ¡†æ¶**: ASCEND (Python Protocol-based)
- **æ•°æ®æº**: Tushare API
- **æ•°æ®åº“**: MySQL/MongoDB
- **åˆ†æåº“**: Pandas/Numpy
- **å¯è§†åŒ–**: Matplotlib/Plotly
- **ç›‘æ§**: è‡ªå®šä¹‰ç›‘æ§ç³»ç»Ÿ

## ğŸ“‹ å¼€å‘è§„èŒƒ

### ä»£ç ç»“æ„
```
quant_plugins/
â”œâ”€â”€ __init__.py
â”œâ”€â”€ data_plugins/
â”œâ”€â”€ strategy_plugins/
â”œâ”€â”€ backtest_plugins/
â”œâ”€â”€ execution_plugins/
â””â”€â”€ config/
```

### æ’ä»¶å¼€å‘è§„èŒƒ
1. éµå¾ª ASCEND åè®®æ¥å£
2. ç‹¬ç«‹çš„é…ç½®ç®¡ç†
3. å®Œå–„çš„é”™è¯¯å¤„ç†
4. è¯¦ç»†çš„æ—¥å¿—è®°å½•
5. å•å…ƒæµ‹è¯•è¦†ç›–

## ğŸ¯ ä¼˜åŠ¿ç‰¹ç‚¹

1. **å®Œå…¨æ’ä»¶åŒ–**: ä¸ä¾µå…¥æ ¸å¿ƒæ¡†æ¶ï¼Œä¿æŒASCENDçº¯å‡€æ€§
2. **åè®®é©±åŠ¨**: åŸºäºPython Protocolï¼Œç±»å‹å®‰å…¨
3. **é…ç½®çµæ´»**: YAMLé…ç½®é©±åŠ¨ï¼Œæ˜“äºè°ƒæ•´å‚æ•°
4. **æ—¥Kçº¿ä¸“æ³¨**: æ·±åº¦ä¼˜åŒ–æ—¥çº¿ç­–ç•¥æ€§èƒ½
5. **é£é™©æ§åˆ¶**: å¤šå±‚æ¬¡é£æ§ä½“ç³»
6. **å¯æ‰©å±•æ€§**: æ˜“äºæ·»åŠ æ–°æ•°æ®æºå’Œç­–ç•¥

## ğŸ“ åç»­è®¡åˆ’

1. æ”¯æŒæ›´å¤šæ•°æ®æºï¼ˆèšå®½ã€Windç­‰ï¼‰
2. å¢åŠ æœºå™¨å­¦ä¹ å› å­
3. å®ç°å®ç›˜äº¤æ˜“æ¥å£
4. å¼€å‘Webå¯è§†åŒ–ç•Œé¢
5. æ”¯æŒå¤šæ—¶é—´æ¡†æ¶ç­–ç•¥

è¿™ä¸ªè®¾è®¡å®Œå…¨åŸºäºASCENDæ¡†æ¶çš„æ’ä»¶åŒ–ç†å¿µï¼Œæ‰€æœ‰åŠŸèƒ½éƒ½é€šè¿‡ç‹¬ç«‹çš„æ’ä»¶å®ç°ï¼Œä¿æŒäº†æ¡†æ¶çš„é€šç”¨æ€§å’Œçº¯å‡€æ€§ã€‚